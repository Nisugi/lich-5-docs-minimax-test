<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Lich::Gemstone::GameInstance
  
    &mdash; Lich 5 Documentation
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Lich::Gemstone::GameInstance";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (G)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Gemstone.html" title="Lich::Gemstone (module)">Gemstone</a></span></span>
     &raquo; 
    <span class="title">GameInstance</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Lich::Gemstone::GameInstance
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../GameBase/GameInstance/Base.html" title="Lich::GameBase::GameInstance::Base (class)">Lich::GameBase::GameInstance::Base</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../GameBase/GameInstance/Base.html" title="Lich::GameBase::GameInstance::Base (class)">Lich::GameBase::GameInstance::Base</a></span></li>
          
            <li class="next">Lich::Gemstone::GameInstance</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>documented/games.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Gemstone-specific game instance</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clean_serverstring-instance_method" title="#clean_serverstring (instance method)">#<strong>clean_serverstring</strong>(server_string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_documentation_url-instance_method" title="#get_documentation_url (instance method)">#<strong>get_documentation_url</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#handle_atmospherics-instance_method" title="#handle_atmospherics (instance method)">#<strong>handle_atmospherics</strong>(server_string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#handle_combat_tags-instance_method" title="#handle_combat_tags (instance method)">#<strong>handle_combat_tags</strong>(server_string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#modify_room_display-instance_method" title="#modify_room_display (instance method)">#<strong>modify_room_display</strong>(alt_string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_game_specific_data-instance_method" title="#process_game_specific_data (instance method)">#<strong>process_game_specific_data</strong>(server_string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_room_display-instance_method" title="#process_room_display (instance method)">#<strong>process_room_display</strong>(alt_string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../GameBase/GameInstance/Base.html" title="Lich::GameBase::GameInstance::Base (class)">Lich::GameBase::GameInstance::Base</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../GameBase/GameInstance/Base.html#atmospherics-instance_method" title="Lich::GameBase::GameInstance::Base#atmospherics (method)">#atmospherics</a></span>, <span class='object_link'><a href="../GameBase/GameInstance/Base.html#atmospherics=-instance_method" title="Lich::GameBase::GameInstance::Base#atmospherics= (method)">#atmospherics=</a></span>, <span class='object_link'><a href="../GameBase/GameInstance/Base.html#combat_count-instance_method" title="Lich::GameBase::GameInstance::Base#combat_count (method)">#combat_count</a></span>, <span class='object_link'><a href="../GameBase/GameInstance/Base.html#increment_combat_count-instance_method" title="Lich::GameBase::GameInstance::Base#increment_combat_count (method)">#increment_combat_count</a></span>, <span class='object_link'><a href="../GameBase/GameInstance/Base.html#initialize-instance_method" title="Lich::GameBase::GameInstance::Base#initialize (method)">#initialize</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <p class="notice">This class inherits a constructor from <span class='object_link'><a href="../GameBase/GameInstance/Base.html#initialize-instance_method" title="Lich::GameBase::GameInstance::Base#initialize (method)">Lich::GameBase::GameInstance::Base</a></span></p>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="clean_serverstring-instance_method">
  
    #<strong>clean_serverstring</strong>(server_string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


734
735
736
737
738
739
740
741
742
743
744
745</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/games.rb', line 734</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clean_serverstring'>clean_serverstring</span><span class='lparen'>(</span><span class='id identifier rubyid_server_string'>server_string</span><span class='rparen'>)</span>
  <span class='comment'># The Rift, Scatter is broken...
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_server_string'>server_string</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;compDef id=&#39;room text&#39;&gt;&lt;\/compDef&gt;</span><span class='regexp_end'>/</span></span>
    <span class='id identifier rubyid_server_string'>server_string</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.*)\s\s&lt;compDef id=&#39;room text&#39;&gt;&lt;\/compDef&gt;</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;compDef id=&#39;room desc&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/compDef&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='comment'># Handle combat and atmospherics
</span>  <span class='id identifier rubyid_server_string'>server_string</span> <span class='op'>=</span> <span class='id identifier rubyid_handle_combat_tags'>handle_combat_tags</span><span class='lparen'>(</span><span class='id identifier rubyid_server_string'>server_string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_server_string'>server_string</span> <span class='op'>=</span> <span class='id identifier rubyid_handle_atmospherics'>handle_atmospherics</span><span class='lparen'>(</span><span class='id identifier rubyid_server_string'>server_string</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_server_string'>server_string</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_documentation_url-instance_method">
  
    #<strong>get_documentation_url</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


781
782
783</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/games.rb', line 781</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_documentation_url'>get_documentation_url</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://gswiki.play.net/Lich:Software/Installation</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="handle_atmospherics-instance_method">
  
    #<strong>handle_atmospherics</strong>(server_string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/games.rb', line 764</span>

<span class='kw'>def</span> <span class='id identifier rubyid_handle_atmospherics'>handle_atmospherics</span><span class='lparen'>(</span><span class='id identifier rubyid_server_string'>server_string</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@atmospherics</span>
    <span class='ivar'>@atmospherics</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_server_string'>server_string</span><span class='period'>.</span><span class='id identifier rubyid_prepend'>prepend</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;popStream id=&quot;atmospherics&quot; /&gt;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_server_string'>server_string</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;popStream id=&quot;atmospherics&quot; \/&gt;</span><span class='regexp_end'>/</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_server_string'>server_string</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;pushStream id=&quot;familiar&quot; \/&gt;&lt;prompt time=&quot;[0-9]+&quot;&gt;&amp;gt;&lt;\/prompt&gt;</span><span class='regexp_end'>/</span></span> <span class='comment'># Cry For Help spell is broken...
</span>    <span class='id identifier rubyid_server_string'>server_string</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;pushStream id=&quot;familiar&quot; /&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_server_string'>server_string</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;pushStream id=&quot;atmospherics&quot; \/&gt;&lt;prompt time=&quot;[0-9]+&quot;&gt;&amp;gt;&lt;\/prompt&gt;</span><span class='regexp_end'>/</span></span> <span class='comment'># pet pigs in DragonRealms are broken...
</span>    <span class='id identifier rubyid_server_string'>server_string</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;pushStream id=&quot;atmospherics&quot; /&gt;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_server_string'>server_string</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;pushStream id=&quot;atmospherics&quot; \/&gt;</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
    <span class='ivar'>@atmospherics</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_server_string'>server_string</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="handle_combat_tags-instance_method">
  
    #<strong>handle_combat_tags</strong>(server_string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/games.rb', line 747</span>

<span class='kw'>def</span> <span class='id identifier rubyid_handle_combat_tags'>handle_combat_tags</span><span class='lparen'>(</span><span class='id identifier rubyid_server_string'>server_string</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@combat_count</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='ivar'>@end_combat_tags</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_tag'>tag</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_server_string'>server_string</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_tag'>tag</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_server_string'>server_string</span> <span class='op'>=</span> <span class='id identifier rubyid_server_string'>server_string</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='id identifier rubyid_tag'>tag</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;popStream id=\&quot;combat\&quot; /&gt;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_tag'>tag</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_server_string'>server_string</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;popStream id=\&quot;combat\&quot; /&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='ivar'>@combat_count</span> <span class='op'>-=</span> <span class='int'>1</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_server_string'>server_string</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;pushStream id=\&quot;combat\&quot; /&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_server_string'>server_string</span> <span class='op'>=</span> <span class='id identifier rubyid_server_string'>server_string</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;pushStream id=\&quot;combat\&quot; /&gt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_increment_combat_count'>increment_combat_count</span><span class='lparen'>(</span><span class='id identifier rubyid_server_string'>server_string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_server_string'>server_string</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="modify_room_display-instance_method">
  
    #<strong>modify_room_display</strong>(alt_string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/games.rb', line 794</span>

<span class='kw'>def</span> <span class='id identifier rubyid_modify_room_display'>modify_room_display</span><span class='lparen'>(</span><span class='id identifier rubyid_alt_string'>alt_string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_uid_from_string'>uid_from_string</span> <span class='op'>=</span> <span class='id identifier rubyid_alt_string'>alt_string</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>] \((?&lt;uid&gt;\d+)\)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_uid_from_string'>uid_from_string</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_lichid_from_uid_string'>lichid_from_uid_string</span> <span class='op'>=</span> <span class='const'>Room</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_lichid_from_uid_string'>lichid_from_uid_string</span> <span class='op'>=</span> <span class='const'>Room</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>u</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uid_from_string'>uid_from_string</span><span class='lbracket'>[</span><span class='symbol'>:uid</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_display_lichid'><span class='object_link'><a href="../../Lich.html#display_lichid-class_method" title="Lich.display_lichid (method)">display_lichid</a></span></span> <span class='op'>==</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_alt_string'>alt_string</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>]</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> - </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lichid_from_uid_string'>lichid_from_uid_string</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_display_uid'><span class='object_link'><a href="../../Lich.html#display_uid-class_method" title="Lich.display_uid (method)">display_uid</a></span></span> <span class='op'>==</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_alt_string'>alt_string</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>] \(\d+\)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_alt_string'>alt_string</span><span class='period'>.</span><span class='id identifier rubyid_sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>]</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>] (</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='id identifier rubyid_uid_from_string'>uid_from_string</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='const'>XMLData</span><span class='period'>.</span><span class='id identifier rubyid_room_id'>room_id</span> <span class='op'>==</span> <span class='id identifier rubyid_uid_from_string'>uid_from_string</span><span class='lbracket'>[</span><span class='symbol'>:uid</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='const'>XMLData</span><span class='period'>.</span><span class='id identifier rubyid_room_id'>room_id</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>||</span> <span class='const'>XMLData</span><span class='period'>.</span><span class='id identifier rubyid_room_id'>room_id</span> <span class='op'>&gt;</span> <span class='int'>4294967296</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unknown</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>u</span><span class='embexpr_beg'>#{</span><span class='const'>XMLData</span><span class='period'>.</span><span class='id identifier rubyid_room_id'>room_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id identifier rubyid_uid_from_string'>uid_from_string</span><span class='lbracket'>[</span><span class='symbol'>:uid</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_alt_string'>alt_string</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="process_game_specific_data-instance_method">
  
    #<strong>process_game_specific_data</strong>(server_string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


785
786
787
788
789
790
791
792</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/games.rb', line 785</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process_game_specific_data'>process_game_specific_data</span><span class='lparen'>(</span><span class='id identifier rubyid_server_string'>server_string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_infomon_serverstring'>infomon_serverstring</span> <span class='op'>=</span> <span class='id identifier rubyid_server_string'>server_string</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='const'><span class='object_link'><a href="Infomon.html" title="Lich::Gemstone::Infomon (module)">Infomon</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Infomon/XMLParser.html" title="Lich::Gemstone::Infomon::XMLParser (module)">XMLParser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="Infomon/XMLParser.html#parse-class_method" title="Lich::Gemstone::Infomon::XMLParser.parse (method)">parse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_infomon_serverstring'>infomon_serverstring</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stripped_infomon_serverstring'>stripped_infomon_serverstring</span> <span class='op'>=</span> <span class='id identifier rubyid_strip_xml'><span class='object_link'><a href="../../top-level-namespace.html#strip_xml-instance_method" title="#strip_xml (method)">strip_xml</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_infomon_serverstring'>infomon_serverstring</span><span class='comma'>,</span> <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>infomon</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stripped_infomon_serverstring'>stripped_infomon_serverstring</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="Infomon.html" title="Lich::Gemstone::Infomon (module)">Infomon</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Infomon/Parser.html" title="Lich::Gemstone::Infomon::Parser (module)">Parser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="Infomon/Parser.html#parse-class_method" title="Lich::Gemstone::Infomon::Parser.parse (method)">parse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="process_room_display-instance_method">
  
    #<strong>process_room_display</strong>(alt_string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/games.rb', line 813</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process_room_display'>process_room_display</span><span class='lparen'>(</span><span class='id identifier rubyid_alt_string'>alt_string</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_display_stringprocs'><span class='object_link'><a href="../../Lich.html#display_stringprocs-class_method" title="Lich.display_stringprocs (method)">display_stringprocs</a></span></span> <span class='op'>==</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_room_exits'>room_exits</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='const'>Map</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_wayto'>wayto</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
      <span class='comment'># Don&#39;t include cardinals / up/down/out (usually just climb/go)
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>StringProc</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='const'>Map</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_timeto'>timeto</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Numeric.html" title="Numeric (class)">Numeric</a></span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='const'>Map</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_timeto'>timeto</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>StringProc</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>Map</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_timeto'>timeto</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Numeric.html" title="Numeric (class)">Numeric</a></span></span><span class='rparen'>)</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_room_exits'>room_exits</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;d cmd=&#39;;go2 </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='const'>Map</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\[|\]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_display_lichid'><span class='object_link'><a href="../../Lich.html#display_lichid-class_method" title="Lich.display_lichid (method)">display_lichid</a></span></span> <span class='op'>?</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='const'>Map</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>)</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/d&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_alt_string'>alt_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>StringProcs: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room_exits'>room_exits</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>\r\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_alt_string'>alt_string</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_room_exits'>room_exits</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_display_exits'><span class='object_link'><a href="../../Lich.html#display_exits-class_method" title="Lich.display_exits (method)">display_exits</a></span></span> <span class='op'>==</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_room_exits'>room_exits</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='const'>Map</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_wayto'>wayto</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__key'>_key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
      <span class='comment'># Don&#39;t include cardinals / up/down/out (usually just climb/go)
</span>      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(?:o|d|u|n|ne|e|se|s|sw|w|nw|out|down|up|north|northeast|east|southeast|south|southwest|west|northwest)$</span><span class='regexp_end'>/</span></span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>StringProc</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_room_exits'>room_exits</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;d cmd=&#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;&gt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;/d&gt;</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_room_exits'>room_exits</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_alt_string'>alt_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Room Exits: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room_exits'>room_exits</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>\r\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_alt_string'>alt_string</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wrayth</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stormfront</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='gvar'>$frontend</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>Map</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="Game.html" title="Lich::Gemstone::Game (class)">Game</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span><span class='lparen'>(</span><span class='symbol'>:@last_id_shown_room_window</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_alt_string'>alt_string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_alt_string'>alt_string</span><span class='embexpr_end'>}</span><span class='tstring_content'>&lt;pushStream id=&#39;room&#39; ifClosedStyle=&#39;watching&#39;/&gt;Room Exits: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_room_exits'>room_exits</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>\r\n&lt;popStream/&gt;\r\n</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="Game.html" title="Lich::Gemstone::Game (class)">Game</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@last_id_shown_room_window</span><span class='comma'>,</span> <span class='const'>Map</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_alt_string'>alt_string</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Nov  7 08:04:21 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.2.9).
</div>

    </div>
  </body>
</html>